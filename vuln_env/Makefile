.PHONY: build img

IMGNAME := mercurial_scm_extract
PORT := 10080

all : build

build:
	docker build -t $(IMGNAME):latest -f Dockerfile .

start: build
	docker run --rm -it -p $(PORT):80 $(IMGNAME)

background:
	docker run --rm -d -p $(PORT):80 $(IMGNAME)

shell:
	docker exec -it $(shell docker ps | grep $(IMGNAME) | awk '{split($$0,a," "); print a[1]}') bash

stop:
	docker stop $(shell docker ps | grep $(IMGNAME) | awk '{split($$0,a," "); print a[1]}')